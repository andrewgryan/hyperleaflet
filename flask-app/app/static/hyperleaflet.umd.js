!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("leaflet")):"function"==typeof define&&define.amd?define(["leaflet"],t):(e||self).hyperleaflet=t(e.leaflet)}(this,function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=/*#__PURE__*/t(e);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},n.apply(this,arguments)}var r={OpenStreetMap:o.default.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),EsriWorldImagery:o.default.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"})};function a(e,t){e.on("click",function(e){var o=document.getElementById("map"),n=new CustomEvent("pointclick",{detail:{point:e.latlng,rowId:t}});o.dispatchEvent(n)})}return function(){if(void 0!==o.default){var e=document.querySelector("[hyperleaflet]"),t=document.createElement("script");t.type="application/json",t.innerText="{}",document.body.appendChild(t);var i=JSON.parse(t.text),l=document.querySelector("#map"),d=l.querySelectorAll("[data-tile]"),c={center:[0,0],zoom:1,tile:r.OpenStreetMap},u=l.dataset,p=(null==u?void 0:u.center.split(","))||c.center.center,s=(null==u?void 0:u.zoom)||c.zoom,f=c.tile,m={};d.forEach(function(e){var t=e.dataset,o=t.tile;if(o in r){var n=r[o];n.options.minZoom=t.minZoom,n.options.maxZoom=t.maxZoom,m[o]=n,"default"in t&&(f=n)}else console.warn(o+" is not in: \n"+Object.keys(r).join("\n"))});var y=o.default.map(l).setView(p,s);!function(e){e.on("click",function(e){var t=document.getElementById("map"),o=new CustomEvent("mapclick",{detail:{point:e.latlng}});t.dispatchEvent(o)}),e.on("zoomend",function(){var t=document.getElementById("map"),o=new CustomEvent("mapzoom",{detail:{zoom:e.getZoom()}});t.dispatchEvent(o)}),e.on("move",function(){var t=document.getElementById("map"),o=new CustomEvent("mapmove",{detail:{bbox:e.getBounds(),center:e.getCenter()}});t.dispatchEvent(o)})}(y),Object.keys(m).length&&o.default.control.layers(m).addTo(y),f.addTo(y);var v=new Proxy({},{set:function(e,t,n){var r=function(e){var t=e.popup,n=e.tooltip,r=e.geometryType,i=e.id,l=JSON.parse(e.geometry);switch(r){case"Point":var d=o.default.marker(l);return t&&d.bindPopup(t),n&&d.bindTooltip(n),a(d,i),d;case"LineString":var c=o.default.GeoJSON.coordsToLatLngs(l,1),u=o.default.polyline(c);return t&&u.bindPopup(t),n&&u.bindTooltip(n),a(u,i),u;case"Polygon":var p=o.default.GeoJSON.coordsToLatLngs(l,1),s=o.default.polygon(p);return t&&s.bindPopup(t),n&&s.bindTooltip(n),a(s,i),s;default:return console.warn(r+" is not supported"),null}}(n);return r?(r.addTo(y),e[t]=r):console.warn("Geometry with "+t+" can not be created"),!0},deleteProperty:function(e,t){return e[t].remove(),delete e[t],!0}});return e.querySelectorAll("[data-id]").forEach(function(e){var o=g(e);i[o[0]]=JSON.parse(o[1]),t.text=JSON.stringify(i,null,2)}),new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&(e.addedNodes.forEach(function(e){if(1===e.nodeType&&e.hasAttribute("data-id")){var t=g(e);i[t[0]]=JSON.parse(t[1])}}),e.removedNodes.forEach(function(e){if(1===e.nodeType&&e.hasAttribute("data-id")){var t=function(e){var t=e.dataset.id;return delete v[t],t}(e);delete i[t]}}))}),t.text=JSON.stringify(i,null,2)}).observe(e,{childList:!0,subtree:!0,attributeFilter:["data-id"]}),{map:y,addGeoJsonToMap:function(e){console.log("first"),o.default.geoJSON(e).addTo(y)}}}function g(e){var t=e.dataset,o=t.id;return v[o]=n({},t),[o,t.geometry]}console.error("Hyperleaf can not access Leaflet")}()});
//# sourceMappingURL=hyperleaflet.umd.js.map
