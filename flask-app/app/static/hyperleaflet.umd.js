!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("leaflet")):"function"==typeof define&&define.amd?define(["leaflet"],t):(e||self).hyperleaflet=t(e.leaflet)}(this,function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=/*#__PURE__*/t(e);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},o.apply(this,arguments)}function r(e,t){e.on("click",function(e){var n=document.getElementById("map"),o=new CustomEvent("pointclick",{detail:{point:e.latlng,rowId:t}});n.dispatchEvent(o)})}var a={OpenStreetMap:n.default.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),EsriWorldImagery:n.default.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"})};return function(){if(void 0!==n.default){var e=function(){var e=document.querySelector("#map"),t=e.querySelectorAll("[data-tile]"),o=e.dataset,r={center:(null==o?void 0:o.center.split(","))||[0,0],zoom:(null==o?void 0:o.zoom)||1,tile:a.OpenStreetMap,tiles:{}};t.forEach(function(e){var t=e.dataset,n=t.tile;if(n in a){var o=a[n];o.options.minZoom=t.minZoom,o.options.maxZoom=t.maxZoom,r.tiles[n]=o,"default"in t&&(r.tile=o)}else console.error(n+" is not in: \n"+Object.keys(a).join("\n"))});var i=n.default.map(e).setView(r.center,r.zoom);return Object.keys(r.tiles).length&&n.default.control.layers(r.tiles).addTo(i),function(e){e.on("click",function(e){var t=document.getElementById("map"),n=new CustomEvent("mapclick",{detail:{point:e.latlng}});t.dispatchEvent(n)}),e.on("zoomend",function(){var t=document.getElementById("map"),n=new CustomEvent("mapzoom",{detail:{zoom:e.getZoom()}});t.dispatchEvent(n)}),e.on("move",function(){var t=document.getElementById("map"),n=new CustomEvent("mapmove",{detail:{bbox:e.getBounds(),center:e.getCenter()}});t.dispatchEvent(n)})}(i),r.tile.addTo(i),i}(),t=document.querySelector("[hyperleaflet]"),i=(0,function(e){var t=new Proxy({},{set:function(t,o,a){if(o in t)return console.error(o+" already exists"),!1;var i=function(e){var t=e.popup,o=e.tooltip,a=e.geometryType,i=e.id,l=JSON.parse(e.geometry);switch(a){case"Point":var d=n.default.marker(l);return t&&d.bindPopup(t),o&&d.bindTooltip(o),r(d,i),d;case"LineString":var c=n.default.GeoJSON.coordsToLatLngs(l,1),u=n.default.polyline(c);return t&&u.bindPopup(t),o&&u.bindTooltip(o),r(u,i),u;case"Polygon":var s=n.default.GeoJSON.coordsToLatLngs(l,1),p=n.default.polygon(s);return t&&p.bindPopup(t),o&&p.bindTooltip(o),r(p,i),p;default:return console.warn(a+" is not supported"),null}}(a);return i?(i.addTo(e),t[o]=i):console.warn("Geometry with "+o+" can not be created"),!0},deleteProperty:function(e,t){return e[t].remove(),delete e[t],!0}}),a=function(){var e=document.createElement("script");e.type="application/json",e.innerText="{}",document.body.appendChild(e);var t=JSON.parse(e.text);return{addToDebugObject:function(n,o,r){t[n]={type:r,coordinates:JSON.parse(o)},e.text=JSON.stringify(t,null,2)},deleteFromDebugObject:function(n){delete t[n],e.text=JSON.stringify(t,null,2)},saveDebugObject:function(){e.text=JSON.stringify(t,null,2)}}}(),i=a.addToDebugObject,l=a.deleteFromDebugObject,d=a.saveDebugObject,c=function(e){return function(n){n.forEach(function(n){if(1===n.nodeType&&n.matches("[data-id]")){var r=function(e){var n=e.dataset,r=n.id;return t[r]=o({},n),[r,n.geometry,n.geometryType]}(n),a=r[0],l=r[1],d=r[2];a&&["none","object"].includes(e)&&(n.removeAttribute("data-geometry"),"object"===e&&i(a,l,d))}}),d()}},u=function(e){return function(n){n.forEach(function(n){if(1===n.nodeType&&n.matches("[data-id]")){var o=function(e){var n=e.dataset.id;return delete t[n],n}(n);["none","object"].includes(e)&&l(o)}}),d()}};return{hyperleafletInteraction:function(e){return{addNoteListToHyperleaflet:c(e),removeNodeListToHyperleaflet:u(e)}}}}(e).hyperleafletInteraction)("inline"),l=i.addNoteListToHyperleaflet,d=i.removeNodeListToHyperleaflet;return e.whenReady(function(){var e=t.querySelectorAll("[data-id]");l(e)}),new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&(l(e.addedNodes),d(e.removedNodes))})}).observe(t,{childList:!0,subtree:!0,attributeFilter:["data-id"]}),{map:e,addGeoJsonToMap:function(t){n.default.geoJSON(t).addTo(e)}}}console.error("Hyperleaf can not access Leaflet")}()});
//# sourceMappingURL=hyperleaflet.umd.js.map
