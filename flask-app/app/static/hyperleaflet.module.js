import e from"leaflet";import{defineExtension as t}from"htmx.org";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},r.apply(this,arguments)}var o={OpenStreetMap:e.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),EsriWorldImagery:e.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"})},n=function(){if(void 0!==e){var n=document.querySelector("#map"),a=n.querySelectorAll("[data-tile]"),i={center:[0,0],zoom:1,tile:o.OpenStreetMap},l=n.dataset,c=(null==l?void 0:l.center.split(","))||i.center.center,s=(null==l?void 0:l.zoom)||i.zoom,d=i.tile,u={};a.forEach(function(e){var t=e.dataset,r=t.tile;if(r in o){var n=o[r];n.options.minZoom=t.minZoom,n.options.maxZoom=t.maxZoom,u[r]=n,"default"in t&&(d=n)}else console.warn(r+" is not in: \n"+Object.keys(o).join("\n"))});var p=e.map(n).setView(c,s);Object.keys(u).length&&e.control.layers(u).addTo(p),d.addTo(p);var m={},f=new Proxy(m,{set:function(t,r,o){var n=e.marker(o.split(",")).addTo(p);return t[r]=n,!0},deleteProperty:function(e,t){return e[t].remove(),delete e[t],!0}});return t("leaflet",{onEvent:function(e){var t,o,n,a,i,l;["htmx:afterProcessNode","htmx:afterOnLoad"].includes(e)&&(a=document.querySelector("[hx-ext=leaflet]").querySelectorAll("[data-id]"),t=i=Array.from(a).reduce(function(e,t){var o;return r({},e,((o={})[t.dataset.id]=t.dataset.latlng,o))},{}),o=Object.keys(m),(l={adds:(n=Object.keys(t)).filter(function(e){return!o.includes(e)}),deletes:o.filter(function(e){return!n.includes(e)})}).adds.forEach(function(e){f[e]=i[e]}),l.deletes.forEach(function(e){delete f[e]}))}}),{map:p}}console.error("Can't access Leaflet")}();export{n as default};
//# sourceMappingURL=hyperleaflet.module.js.map
