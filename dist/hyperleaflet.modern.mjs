import e from"leaflet";const t=document.createElement("script");t.type="application/json",t.innerText="{}",document.body.appendChild(t);const o=JSON.parse(t.text);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},n.apply(this,arguments)}function r(e,t){e.on("click",e=>{const o=document.getElementById("map"),n=new CustomEvent("pointclick",{detail:{point:e.latlng,rowId:t}});o.dispatchEvent(n)})}const i={OpenStreetMap:e.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),EsriWorldImagery:e.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"})},a=function(){if(void 0===e)return void console.error("Hyperleaf can not access Leaflet");const a=(()=>{const t=document.querySelector("#map"),o=t.querySelectorAll("[data-tile]"),{dataset:n}=t,r={center:(null==n?void 0:n.center.split(","))||[0,0],zoom:(null==n?void 0:n.zoom)||1,tile:i.OpenStreetMap,tiles:{}};o.forEach(e=>{const{dataset:t}=e,o=t.tile;if(o in i){const e=i[o];e.options.minZoom=t.minZoom,e.options.maxZoom=t.maxZoom,r.tiles[o]=e,"default"in t&&(r.tile=e)}else console.error(`${o} is not in: \n${Object.keys(i).join("\n")}`)});const a=e.map(t).setView(r.center,r.zoom);return Object.keys(r.tiles).length&&e.control.layers(r.tiles).addTo(a),function(e){e.on("click",e=>{const t=document.getElementById("map"),o=new CustomEvent("mapclick",{detail:{point:e.latlng}});t.dispatchEvent(o)}),e.on("zoomend",()=>{const t=document.getElementById("map"),o=new CustomEvent("mapzoom",{detail:{zoom:e.getZoom()}});t.dispatchEvent(o)}),e.on("move",()=>{const t=document.getElementById("map"),o=new CustomEvent("mapmove",{detail:{bbox:e.getBounds(),center:e.getCenter()}});t.dispatchEvent(o)})}(a),r.tile.addTo(a),a})(),c=document.querySelector("[hyperleaflet]"),{addNodeToHyperleaf:s,deleteNodeFromHyperleaflet:d}=function(t){const o=new Proxy({},{set(o,n,i){if(n in o)return console.error(`${n} already exists`),!1;const a=function(t){const{geometry:o,popup:n,tooltip:i,geometryType:a,id:c}=t,s=JSON.parse(o);switch(a){case"Point":{const t=e.marker(s);return n&&t.bindPopup(n),i&&t.bindTooltip(i),r(t,c),t}case"LineString":{const t=e.GeoJSON.coordsToLatLngs(s,1),o=e.polyline(t);return n&&o.bindPopup(n),i&&o.bindTooltip(i),r(o,c),o}case"Polygon":{const t=e.GeoJSON.coordsToLatLngs(s,1),o=e.polygon(t);return n&&o.bindPopup(n),i&&o.bindTooltip(i),r(o,c),o}default:return console.warn(`${a} is not supported`),null}}(i);return a?(a.addTo(t),o[n]=a):console.warn(`Geometry with ${n} can not be created`),!0},deleteProperty:(e,t)=>(e[t].remove(),delete e[t],!0)});return{addNodeToHyperleaf:function(e){const{dataset:t}=e,r=t.id;return o[r]=n({},t),[r,t.geometry,t.geometryType]},deleteNodeFromHyperleaflet:function(e){const t=e.dataset.id;return delete o[t],t}}}(a),{addToDebugObject:l,deleteFromDebugObject:p,saveDebugObject:u}={addToDebugObject:function(e,n,r){o[e]={type:r,coordinates:JSON.parse(n)},t.text=JSON.stringify(o,null,2)},deleteFromDebugObject:function(e){delete o[e],t.text=JSON.stringify(o,null,2)},saveDebugObject:function(){t.text=JSON.stringify(o,null,2)}};return a.whenReady(()=>{c.querySelectorAll("[data-id]").forEach(e=>{const[t,o,n]=s(e);t&&l(t,o,n),u()})}),new MutationObserver(function(e){e.forEach(e=>{"childList"===e.type&&(e.addedNodes.forEach(e=>{if(1===e.nodeType&&e.matches("[data-id]")){const[t,o,n]=s(e);t&&l(t,o,n)}}),e.removedNodes.forEach(e=>{if(1===e.nodeType&&e.matches("[data-id]")){const t=d(e);p(t)}}))}),u()}).observe(c,{childList:!0,subtree:!0,attributeFilter:["data-id"]}),{map:a,addGeoJsonToMap:t=>{e.geoJSON(t).addTo(a)}}}();export{a as default};
//# sourceMappingURL=hyperleaflet.modern.mjs.map
