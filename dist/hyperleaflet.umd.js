!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("leaflet")):"function"==typeof define&&define.amd?define(["leaflet"],t):(e||self).hyperleaflet=t(e.leaflet)}(this,function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=/*#__PURE__*/t(e),n=document.createElement("script");n.type="application/json",n.innerText="{}",document.body.appendChild(n);var r=JSON.parse(n.text);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},a.apply(this,arguments)}function i(e,t){e.on("click",function(e){var o=document.getElementById("map"),n=new CustomEvent("pointclick",{detail:{point:e.latlng,rowId:t}});o.dispatchEvent(n)})}var d={OpenStreetMap:o.default.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),EsriWorldImagery:o.default.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"})};return function(){if(void 0!==o.default){var e=function(){var e=document.querySelector("#map"),t=e.querySelectorAll("[data-tile]"),n=e.dataset,r={center:(null==n?void 0:n.center.split(","))||[0,0],zoom:(null==n?void 0:n.zoom)||1,tile:d.OpenStreetMap,tiles:{}};t.forEach(function(e){var t=e.dataset,o=t.tile;if(o in d){var n=d[o];n.options.minZoom=t.minZoom,n.options.maxZoom=t.maxZoom,r.tiles[o]=n,"default"in t&&(r.tile=n)}else console.error(o+" is not in: \n"+Object.keys(d).join("\n"))});var a=o.default.map(e).setView(r.center,r.zoom);return Object.keys(r.tiles).length&&o.default.control.layers(r.tiles).addTo(a),function(e){e.on("click",function(e){var t=document.getElementById("map"),o=new CustomEvent("mapclick",{detail:{point:e.latlng}});t.dispatchEvent(o)}),e.on("zoomend",function(){var t=document.getElementById("map"),o=new CustomEvent("mapzoom",{detail:{zoom:e.getZoom()}});t.dispatchEvent(o)}),e.on("move",function(){var t=document.getElementById("map"),o=new CustomEvent("mapmove",{detail:{bbox:e.getBounds(),center:e.getCenter()}});t.dispatchEvent(o)})}(a),r.tile.addTo(a),a}(),t=document.querySelector("[hyperleaflet]"),l=function(e){var t=new Proxy({},{set:function(t,n,r){if(n in t)return console.error(n+" already exists"),!1;var a=function(e){var t=e.popup,n=e.tooltip,r=e.geometryType,a=e.id,d=JSON.parse(e.geometry);switch(r){case"Point":var l=o.default.marker(d);return t&&l.bindPopup(t),n&&l.bindTooltip(n),i(l,a),l;case"LineString":var c=o.default.GeoJSON.coordsToLatLngs(d,1),u=o.default.polyline(c);return t&&u.bindPopup(t),n&&u.bindTooltip(n),i(u,a),u;case"Polygon":var s=o.default.GeoJSON.coordsToLatLngs(d,1),p=o.default.polygon(s);return t&&p.bindPopup(t),n&&p.bindTooltip(n),i(p,a),p;default:return console.warn(r+" is not supported"),null}}(r);return a?(a.addTo(e),t[n]=a):console.warn("Geometry with "+n+" can not be created"),!0},deleteProperty:function(e,t){return e[t].remove(),delete e[t],!0}});return{addNodeToHyperleaf:function(e){var o=e.dataset,n=o.id;return t[n]=a({},o),[n,o.geometry,o.geometryType]},deleteNodeFromHyperleaflet:function(e){var o=e.dataset.id;return delete t[o],o}}}(e),c=l.addNodeToHyperleaf,u=l.deleteNodeFromHyperleaflet,s={addToDebugObject:function(e,t,o){r[e]={type:o,coordinates:JSON.parse(t)},n.text=JSON.stringify(r,null,2)},deleteFromDebugObject:function(e){delete r[e],n.text=JSON.stringify(r,null,2)},saveDebugObject:function(){n.text=JSON.stringify(r,null,2)}},p=s.addToDebugObject,f=s.deleteFromDebugObject,m=s.saveDebugObject;return e.whenReady(function(){t.querySelectorAll("[data-id]").forEach(function(e){var t=c(e),o=t[0];o&&p(o,t[1],t[2]),m()})}),new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&(e.addedNodes.forEach(function(e){if(1===e.nodeType&&e.matches("[data-id]")){var t=c(e),o=t[0];o&&p(o,t[1],t[2])}}),e.removedNodes.forEach(function(e){if(1===e.nodeType&&e.matches("[data-id]")){var t=u(e);f(t)}}))}),m()}).observe(t,{childList:!0,subtree:!0,attributeFilter:["data-id"]}),{map:e,addGeoJsonToMap:function(t){o.default.geoJSON(t).addTo(e)}}}console.error("Hyperleaf can not access Leaflet")}()});
//# sourceMappingURL=hyperleaflet.umd.js.map
